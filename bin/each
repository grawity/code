#!/usr/bin/env bash

args=()
cmd=()
flag=0

if [[ -t 0 ]]; then
	for arg; do
		if (( flag == 1 )); then
			cmd+=("$arg")
		elif [[ $arg == "--" ]]; then
			flag=1
		else
			args+=("$arg")
		fi
	done

	for arg in "${args[@]}"; do
		"${cmd[@]}" "$arg"
	done
else
	for arg; do
		cmd+=("$arg")
	done

	while IFS= read -r arg; do
		"${cmd[@]}" "$arg" </dev/tty
	done
fi
