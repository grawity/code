#!/usr/bin/env perl
# utfvis -- make non-ASCII Unicode characters highly visible

use open qw(:std :encoding(UTF-8));

sub hilight {
	my ($c) = @_;
	$c = sprintf "<U+%04X>", ord($c);
	if (-t 1) {
		return "\e[1;37;41m$c\e[m";
	} else {
		return "$c";
	}
}

while (<>) {
	s/[^\n\t\x20-\x7e]/hilight($&)/ge;
	print;
}
