#!/usr/bin/env bash
# lspkgs -- list packages
# (group: lspkg, lspkgs, whatowns, lcpkg, sysup)

have() { command -v "$1" &>/dev/null; }

unset dist tool

if [ -e /etc/os-release ]; then
	dist=$(. /etc/os-release && echo "$ID $ID_LIKE")
	dist=:${dist// /:}:
fi

case $dist in
	*:arch:*)
		tool=pacman;;
	*:debian:*)
		tool=dpkg;;
	*)
		echo "$0: unknown distribution" >&2
		exit 2
esac

case $tool in
	dpkg)
		dpkg -l | awk '/^i/ {print $2}';;
	pacman)
		pacman -Qq;;
	rpm)
		rpm -qa --qf '%{NAME}\n';;
	pkg-freebsd)
		pkg info -q;;
	*)
		echo "$0: unknown distribution" >&2
		exit 2
esac
