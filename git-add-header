#!/usr/bin/env python
import os, sys

type, = sys.argv[1:] or ["commit"]

with open("/dev/stdin", "rb") as fh:
	blob = fh.read()

header = "%s %d\0" % (type, len(blob))

with open("/dev/stdout", "wb") as fh:
	fh.write(header.encode("utf-8"))
	fh.write(blob)
