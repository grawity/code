#!/usr/bin/env bash

schema="org.gnome.desktop.interface"
key="color-scheme"
value_on="'prefer-dark'"

current=$(gsettings get "$schema" "$key")

if [[ "$current" == "$value_on" ]]; then
	gsettings reset "$schema" "$key"
	text="disabled"
else
	gsettings set "$schema" "$key" "$value_on"
	text="enabled"
fi

if [[ -t 1 ]]; then
	echo "Dark Mode has been $text."
else
	notify-resend -r hotkey -e -i "dark-mode-symbolic" \
		"Dark Mode" \
		"Dark Mode has been $text."
fi
