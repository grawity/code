#!/usr/bin/env bash

. lib.bash || exit

shake() {
	printf '%s\r\n' \
		"CAP LS" "VERSION" "QUIT" ;
}

host=$1

working=()
failed=()

for port in 6667 194; do
	log "testing port $port (plaintext)"
	shake | nc -v -v "$host" "$port"
done

for port in 6697 9999 994; do
	log "testing port $port (SSL)"
	shake | gnutls-cli "$host" -p "$port"
done
