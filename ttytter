#!/usr/bin/env bash
# wrapper for 'ttytter' (update, environ, args)

EXE="$HOME/lib/ttytter"
CONF="$XDG_CONFIG_HOME/ttytter"

if [[ $1 == "update" ]]; then
	shift
	curl "http://www.floodgap.com/software/ttytter/ttytter.txt" > "$EXE"
	chmod +rx "$EXE"
fi

export PATH="$HOME/bin/compat/ttytter:$PATH"
export PERL_RL="TTYtter"
export PERL_SIGNALS="unsafe"

exec -a "$0" "$EXE" -rc="$CONF/rc" -keyf="$CONF/key" "$@"
