#!/usr/bin/env bash
# lspkg -- list a package's contents
# (group: lspkg, lspkgs, whatowns, lcpkg, sysup)

have() { command -v "$1" &>/dev/null; }

unset dist tool

if [ -e /etc/os-release ]; then
	dist=$(. /etc/os-release && echo "$ID $ID_LIKE")
	dist=:${dist// /:}:
fi

case $dist in
	*:arch:*)
		tool=pacman;;
	*:debian:*)
		tool=dpkg;;
	*)
		echo "$0: unknown distribution" >&2
		exit 2
esac

case $tool in
	dpkg)
		dpkg -L "$@";;
	pacman)
		pacman -Qql "$@";;
	rpm)
		rpm -ql "$@";;
	pkg-freebsd)
		pkg query %Fp "$@";;
	*)
		echo "$0: unknown distribution" >&2
		exit 2
esac
