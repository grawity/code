#!/usr/bin/env bash

hist=${XDG_CACHE_HOME:-$HOME/.cache}/dmenu.history

prompt='run:'

menu='dmenu -l 7'
#menu='rofi -dmenu -location 0'
#menu='bemenu -l 7'

ign='mm'

_ign="^($ign)( |\$)"

input=$(dmenu-print-history "$hist" | $menu -p "$prompt")

if [[ "$input" ]]; then
	if ! [[ "$input" =~ $_ign ]]; then
		echo "$(date +%s) $input" >> "$hist"
	fi

	echo "$input" | ${SHELL:-/bin/sh} &
fi
